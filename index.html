<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>六（2）毕业纪念 - 登录</title>
    <style>
        body {
            background-image: url('https://bgithub.xyz/fanghuangxu/62/raw/refs/heads/main/icons/images/bg.jpg');
            background-size: cover;
            /* 使背景图片覆盖整个页面 */
            background-repeat: no-repeat;
            /* 防止背景图片重复 */
            background-attachment: fixed;
            /* 使背景图片固定，不随页面滚动 */
        }
    </style>
    <script>
        async function hashString(message) {
            const msgBuffer = new TextEncoder().encode(message); // 将字符串编码为Uint8Array
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer); // 计算哈希
            const hashArray = Array.from(new Uint8Array(hashBuffer)); // 将Buffer转换为数组
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join(''); // 将字节数组转换为十六进制字符串
            return hashHex;
        }



        async function validateLogin() {
            // 获取用户名的值
            var username = document.getElementById('name').value;

            // 这里仅作为示例，实际应用中应从服务器获取正确用户名和密码
            var correctUsername = "688c6aa87034aa2dbffb6a00ddcb3e1342de0a12ca33320827dbf174e7604964";

            // 计算输入用户名的哈希值
            const usernameHash = await hashString(username);

            // 判断用户名是否正确
            if (usernameHash === correctUsername) {
                // 如果正确，重定向到 lindex.html
                window.location.href = 'lindex.html';
            } else {
                // 如果不正确，提示错误信息
                alert('用户名或密码错误，请重试。\nname:' + usernameHash);
            }

            // 阻止表单的默认提交行为
            return false;
        }

    </script>
    <link rel="stylesheet" type="text/css" href="styles/main.page.css">
</head>

<body>
    <header>
        <h1>六（2）毕业纪念 - 登录</h1>
        <a href="administrator_login.html">我是 administrator 组的成员</a>
    </header>
    <main>
        <h1>登录</h1>
        <form onsubmit="return validateLogin()">
            <label for="name">班主任的名字</label>
            <input type="text" id="name" name="name" required>
            <button type="submit" id="login-btn">登录</button>
        </form>
    </main>
</body>

</html>
